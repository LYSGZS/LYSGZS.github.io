<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>åˆ˜æ¨å²å·¥ä½œå®¤ - å¤šæ ¼æ¼«ç”»</title>
    <style>
        body {
            background-color: #f5f5f5;
            font-family: "Microsoft YaHei", sans-serif;
            margin: 0;
            padding: 0;
            text-align: center;
        }

        h1 {
            color: #333;
            margin: 30px 0 20px;
        }

        .comic-container {
            padding: 0 20px 20px;
            margin-bottom: 40px;
            text-align: center;
        }

        .comic-container img {
            width: 90vw;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
            margin: auto;
        }

        @media (min-width: 600px) {
            .comic-container img {
                width: 70vw;
            }
        }

        /* å°ç”µè§†æ¨¡å—æ ·å¼ */
        .tv-container {
            margin: 20px auto;
            max-width: 600px;
        }

        .tv-container h3 {
            color: #00a1d6;
            margin-bottom: 10px;
        }

        #miniTv {
            width: 180px;
            height: 120px;
            background: linear-gradient(145deg, #1a1a1a, #2c2c2c);
            border: 3px solid #f0f0f0;
            border-radius: 12px;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            cursor: pointer;
        }

        #tvScreen {
            width: 90%;
            height: 70%;
            margin: 10% auto 0;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
            animation: scanline 2s infinite;
        }

        #liveWrap {
            width: 100%;
            height: 100%;
            background: #000;
            display: none;
        }

        #liveWrap iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        @keyframes scanline {
            0% { opacity: 0.8; }
            50% { opacity: 1; }
            100% { opacity: 0.8; }
        }

        .tv-container p {
            color: #666;
            font-size: 14px;
            margin-top: 10px;
            opacity: 0.7;
            transition: opacity 0.3s;
        }

        /* èŠå¤©å®¤æ ·å¼ */
        .chat-container {
            max-width: 600px;
            margin: 0 auto 40px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .chat-messages {
            max-height: 300px;
            padding: 15px;
            overflow-y: auto;
            background: #f9f9f9;
            border-bottom: 1px solid #ddd;
            font-size: 14px;
        }

        .chat-input {
            display: flex;
            padding: 10px;
            background: #fff;
        }

        .chat-input input {
            flex: 1;
            padding: 8px 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
        }

        .chat-input button {
            margin-left: 10px;
            padding: 8px 16px;
            border: none;
            background: #007BFF;
            color: white;
            border-radius: 4px;
            cursor: pointer;
        }

        .chat-input button:hover {
            background: #0056b3;
        }

        .message {
            margin: 5px 0;
        }

        .message.user {
            text-align: right;
            color: #007BFF;
        }

        .message.bot {
            text-align: left;
            color: #333;
        }

        .clear-btn {
            text-align: right;
            padding: 5px 10px;
        }
    </style>
</head>
<body>

    <h1>åˆ˜æ¨å²å·¥ä½œå®¤</h1>

    <!-- å¤šæ ¼æ¼«ç”»å›¾ç‰‡å®¹å™¨ -->
    <section class="comic-container" role="region" aria-label="å¤šæ ¼æ¼«ç”»å±•ç¤º">
        <img src="/IMG_4697.jpeg" alt="æ¼«ç”»åœºæ™¯1ï¼šè§’è‰²Aåœ¨æ£®æ—ä¸­å‘ç°ç¥ç§˜ç¬¦å·" class="comic-img" />
        <img src="/IMG_4763.jpeg" alt="æ¼«ç”»åœºæ™¯2ï¼šè§’è‰²Bä¸è§’è‰²Aè®¨è®ºç¬¦å·å«ä¹‰" class="comic-img" />
        <img src="/IMG_4764.jpeg" alt="æ¼«ç”»åœºæ™¯3ï¼šè§’è‰²CåŠ å…¥å›¢é˜Ÿå¹¶æå‡ºæ–°çº¿ç´¢" class="comic-img" />
        <img src="/IMG_4765.jpeg" alt="æ¼«ç”»åœºæ™¯4ï¼šå›¢é˜Ÿå‘ç°éšè—çš„å¯†å®¤å…¥å£" class="comic-img" />
        <img src="/IMG_4809.jpeg" alt="æ¼«ç”»åœºæ™¯5ï¼šå¯†å®¤ä¸­å‡ºç°å±é™©é™·é˜±" class="comic-img" />
        <img src="/IMG_4842.jpeg" alt="æ¼«ç”»åœºæ™¯6ï¼šå›¢é˜ŸæˆåŠŸé€ƒè„±å¹¶åº†ç¥èƒœåˆ©" class="comic-img" />
        <img src="/IMG_5356.jpeg" alt="æ¼«ç”»åœºæ™¯7ï¼šæ–°çš„å†’é™©å³å°†å¼€å§‹" class="comic-img" />
    </section>

    <!-- å°ç”µè§†æ¨¡å— -->
    <div class="tv-container">
        <h3>ğŸ“º å°ç”µè§†ç›´æ’­é—´</h3>
        <div id="miniTv" ondblclick="toggleTV()">
            <div id="tvScreen">
                <!-- ç›´æ’­åµŒå…¥å®¹å™¨ -->
                <div id="liveWrap">
                    <iframeÂ 
                        frameborder="0"Â 
                        allowfullscreen="true"
                        scrolling="no">
                    </iframe>
                </div>
            </div>
            <!-- åº•åº§ -->
            <div style="
                width: 60px;
                height: 10px;
                background: #333;
                border-radius: 5px;
                margin: 8px auto 0;
            "></div>
        </div>
        <p id="tvHint">å½“å‰ç›´æ’­ï¼šåˆ˜æ¨å²å·¥ä½œå®¤ Â· æ¼«ç”»åˆ›ä½œå¹•åèŠ±çµ®</p>
    </div>

    <!-- èŠå¤©å®¤ -->
    <div class="chat-container">
        <div class="chat-messages" id="chatMessages">
            <div class="message bot">æ¬¢è¿æ¥åˆ°åˆ˜æ¨å²å·¥ä½œå®¤èŠå¤©å®¤ï¼</div>
        </div>
        <div class="clear-btn">
            <button onclick="clearChatHistory()">æ¸…ç©ºèŠå¤©è®°å½•</button>
        </div>
        <div class="chat-input">
            <input type="text" id="chatInput" placeholder="è¾“å…¥ä½ çš„æ¶ˆæ¯..." />
            <button onclick="sendMessage()">å‘é€</button>
        </div>
    </div>

    <script>
        // å°ç”µè§†çŠ¶æ€
        let isTVOn = false;

        // è®¾ç½®ä½ çš„ç›´æ’­æˆ¿é—´å·ï¼ˆæ›¿æ¢ä¸‹é¢çš„ 123456ï¼‰
        const roomId = "123456"; // ğŸ”” æ›¿æ¢æˆä½ çš„çœŸå® Bilibili ç›´æ’­é—´ ID
        const iframeSrc = `//player.bilibili.com/player.html?aid=0&cid=0&bvid=0&autoplay=1&room_id=${roomId}`;

        // åˆ‡æ¢ç”µè§†å¼€å…³
        function toggleTV() {
            const liveWrap = document.getElementById("liveWrap");
            const tvHint = document.getElementById("tvHint");

            if (isTVOn) {
                // å…³æœº
                liveWrap.style.display = "none";
                tvHint.textContent = "ğŸ“º ç”µè§†å·²å…³é—­ï¼ŒåŒå‡»é‡æ–°å¼€æœº";
                tvHint.style.color = "#999";
            } else {
                // å¼€æœº
                liveWrap.querySelector("iframe").src = iframeSrc;
                liveWrap.style.display = "block";
                tvHint.textContent = "æ­£åœ¨ç›´æ’­ï¼šåˆ˜æ¨å²å·¥ä½œå®¤ Â· æ¼«ç”»åˆ›ä½œå¹•åèŠ±çµ®";
                tvHint.style.color = "#00a1d6";
            }
            isTVOn = !isTVOn;
        }

        // ç‚¹å‡»å±å¹•æç¤º
        document.getElementById("tvScreen").addEventListener("click", function () {
            if (isTVOn) {
                alert("ğŸ“º æ­£åœ¨è§‚çœ‹ç›´æ’­ï¼šåˆ˜æ¨å²å·¥ä½œå®¤\nğŸ“… æ¯å‘¨äº”æ™š8ç‚¹æ›´æ–°åˆ›ä½œå¹•åï¼");
            } else {
                alert("ç”µè§†å·²å…³æœºï¼ŒåŒå‡»å¯å¼€æœº~");
            }
        });

        // æ‚¬åœæ•ˆæœ
        document.getElementById("miniTv").addEventListener("mouseenter", function () {
            document.getElementById("tvHint").style.opacity = "1";
        });
        document.getElementById("miniTv").addEventListener("mouseleave", function () {
            document.getElementById("tvHint").style.opacity = "0.7";
        });

        // ç©ºæ ¼é”®å¼€å…³ç”µè§†ï¼ˆæ’é™¤è¾“å…¥æ¡†å†²çªï¼‰
        document.addEventListener("keydown", function (e) {
            if (e.key === " " && e.target.tagName !== "INPUT" && e.target.tagName !== "TEXTAREA") {
                e.preventDefault();
                toggleTV();
            }
        });

        // --------------------------
        // èŠå¤©å®¤åŠŸèƒ½ï¼ˆåŸæ ·ä¿ç•™ï¼‰
        // --------------------------
        window.onload = function () {
            const container = document.getElementById("chatMessages");
            const history = JSON.parse(localStorage.getItem("chatHistory")) || [];

            history.forEach(msg => {
                const msgDiv = document.createElement("div");
                msgDiv.className = "message " + msg.type;
                msgDiv.textContent = msg.text;
                container.appendChild(msgDiv);
            });
        };

        function sendMessage() {
            const input = document.getElementById("chatInput");
            const message = input.value.trim();
            if (message === "") return;

            addMessage(message, "user");

            setTimeout(() => {
                const botReply = "æ”¶åˆ°æ¶ˆæ¯ï¼š" + message;
                addMessage(botReply, "bot");
            }, 500);

            input.value = "";
            input.focus();
        }

        function addMessage(text, type) {
            const container = document.getElementById("chatMessages");
            const msgDiv = document.createElement("div");
            msgDiv.className = "message " + type;
            msgDiv.textContent = text;
            container.appendChild(msgDiv);
            container.scrollTop = container.scrollHeight;

            let history = JSON.parse(localStorage.getItem("chatHistory")) || [];
            history.push({ text, type });
            if (history.length > 100) history.shift();
            localStorage.setItem("chatHistory", JSON.stringify(history));
        }

        document.getElementById("chatInput").addEventListener("keydown", function (e) {
            if (e.key === "Enter") {
                sendMessage();
            }
        });

        function clearChatHistory() {
            if (confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰èŠå¤©è®°å½•å—ï¼Ÿ")) {
                localStorage.removeItem("chatHistory");
                document.getElementById("chatMessages").innerHTML = "";
            }
        }
    </script>

</body>
</html>
